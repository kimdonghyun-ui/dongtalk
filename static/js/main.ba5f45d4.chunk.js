(this.webpackJsonpdongtalk=this.webpackJsonpdongtalk||[]).push([[0],{117:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(14),r=n.n(c),s=n(54),i=n(21),l=n(87),u=(n(117),n(31)),d=n(16),m=n(11),j="menu/RX_AUTHENTICATED",b="menu/RX_ALL_USERS",f="menu/RX_ME",p="menu/RX_CONNECTED",h="menu/RX_MYROOMLIST",g="menu/RX_ALLROOMLIST",O="menu/RX_ALLMSGLIST",x="menu/RX_FOCUSMSG",v="menu/RX_REMOVE",y="menu/RX_FOCUSROOM",_="menu/RX_LOADING1",w="menu/RX_LOADING2",C="menu/RX_LOADING3",k=function(e){return{type:x,result:e}},S=function(e){return{type:y,result:e}},N={authenticated:!1,all_users:[],me:{},all_connected:"",myroomlist:[],allroomlist:[],allmsglist:[],focusmsg:[],focusroom:"",loading1:!1,loading2:!1,loading3:!1};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(m.a)(Object(m.a)({},e),{},{authenticated:t.result});case b:return Object(m.a)(Object(m.a)({},e),{},{all_users:t.result});case f:return Object(m.a)(Object(m.a)({},e),{},{me:t.result});case p:return Object(m.a)(Object(m.a)({},e),{},{all_connected:t.result});case h:return Object(m.a)(Object(m.a)({},e),{},{myroomlist:t.result});case g:return Object(m.a)(Object(m.a)({},e),{},{allroomlist:t.result});case O:return Object(m.a)(Object(m.a)({},e),{},{allmsglist:t.result});case x:return Object(m.a)(Object(m.a)({},e),{},{focusmsg:t.result});case v:return Object(m.a)(Object(m.a)({},e),{},{focusmsg:e.focusmsg.filter((function(e){return e.key!==t.key}))});case y:return Object(m.a)(Object(m.a)({},e),{},{focusroom:t.result});case _:return Object(m.a)(Object(m.a)({},e),{},{loading1:t.result});case w:return Object(m.a)(Object(m.a)({},e),{},{loading2:t.result});case C:return Object(m.a)(Object(m.a)({},e),{},{loading3:t.result});default:return e}},A=n(57);n(130),n(118),n(120);A.a.initializeApp({apiKey:"AIzaSyAtKM1gMUkzx8Al9G5Y6jozCsTTezqmo4M",authDomain:"dongtalk-82851.firebaseapp.com",databaseURL:"https://dongtalk-82851-default-rtdb.firebaseio.com",projectId:"dongtalk-82851",storageBucket:"dongtalk-82851.appspot.com",messagingSenderId:"63820293757",appId:"1:63820293757:web:1d2960afd6d6ddf589b314",measurementId:"G-E7K9VBW4D0"});var R=A.a,D=A.a.auth(),U=(A.a.firestore(),A.a.database());function E(e){if(!0===e){var t=D.currentUser.uid,n=U.ref("UsersConnection/".concat(t));U.ref(".info/connected").on("value",(function(e){!0===e.val()?(console.log("connected"),n.set({connection:!0,uid:t})):(console.log("not connected"),n.set({connection:!1,uid:t}))})),n.onDisconnect().set({connection:!1,uid:t})}}function B(e){console.log("member",e),D.setPersistence(R.auth.Auth.Persistence.SESSION).then((function(){return console.log("\ub85c\uadf8\uc778 \uc720\uc9c0 \uc911"),D.signInWithEmailAndPassword(e.email,e.password)})).catch((function(e){console.log("\ub85c\uadf8\uc778 \uc720\uc9c0 \uc2e4\ud328");var t=e.code,n=e.message;console.log("errorCode",t),console.log("errorMessage",n)}))}function L(e,t){if(""!==t){var n=U.ref("msg/".concat(t)).push().key,a={message:e.message,timestamp:e.timestamp,uid:e.uid,key:n,name:e.name},o={};return o["msg/".concat(t,"/").concat(n)]=a,U.ref().update(o)}alert("\ubc29\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694")}function T(e){return D.signInWithEmailAndPassword(e.email,e.password).then((function(){console.log("signIn()\ub85c\uadf8\uc778\uc131\uacf5")})).catch((function(e){console.log("signIn()\uc2e4\ud328")}))}function M(e){return D.createUserWithEmailAndPassword(e.email,e.password).then((function(){console.log("signUp()\uac00\uc785\uc131\uacf5",e.email,e.password);var t=U.ref("all_users").push().key,n={email:e.email,name:e.name,password:e.password,uid:D.currentUser.uid,key:t},a={};return a["/all_users/"+t]=n,U.ref().update(a)})).catch((function(e){alert("The email address is already in use by another account."===e.message&&"\uc774\ubbf8 \uc788\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4.")}))}function W(e,t){if(""!==e){var n=e.filter((function(e){return e.uid===t}));return n.length>0&&n[0].connection}}var F=n(71),X=n(4);var P=function(e){var t=e.component,n=e.authenticated,a=Object(F.a)(e,["component","authenticated"]);return Object(X.jsx)(d.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return!1===n?Object(X.jsx)(t,Object(m.a)({},e)):Object(X.jsx)(d.a,{to:"/chat"})}}))};var Y=function(e){var t=e.component,n=e.authenticated,a=Object(F.a)(e,["component","authenticated"]);return Object(X.jsx)(d.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return!0===n?Object(X.jsx)(t,Object(m.a)({},e)):Object(X.jsx)(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},G=n(39),q=n.n(G),z=n(53),J=n(52),V=n(38),H=n(167),K=n(61),$=n(166),Q=n(168),Z=n(169),ee=n(186),te=n(170),ne=n(182),ae=n(183),oe=n(69),ce=n.n(oe);function re(){return Object(X.jsxs)(K.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(X.jsx)($.a,{component:u.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var se=Object(H.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var ie=function(){var e=se(),t=Object(a.useState)({email:"",name:"",password:""}),n=Object(V.a)(t,2),o=n[0],c=n[1],r=function(e){var t=e.target,n=t.name,a=t.value;c(Object(m.a)(Object(m.a)({},o),{},Object(J.a)({},n,a)))},s=function(){var e=Object(z.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""!==o.email&&""!==o.password&&""!==o.name&&M(o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)(Q.a,{component:"main",maxWidth:"xs",children:[Object(X.jsx)(Z.a,{}),Object(X.jsxs)("div",{className:e.paper,children:[Object(X.jsx)(ee.a,{className:e.avatar,children:Object(X.jsx)(ce.a,{})}),Object(X.jsx)(K.a,{component:"h1",variant:"h5",children:"\ud68c\uc6d0 \uac00\uc785"}),Object(X.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:s,children:[Object(X.jsxs)(te.a,{container:!0,spacing:2,children:[Object(X.jsx)(te.a,{item:!0,xs:12,children:Object(X.jsx)(ne.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:o.email,onChange:r})}),Object(X.jsx)(te.a,{item:!0,xs:12,children:Object(X.jsx)(ne.a,{variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"name",name:"name",autoComplete:"name",value:o.name,onChange:r})}),Object(X.jsx)(te.a,{item:!0,xs:12,children:Object(X.jsx)(ne.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:r})})]}),Object(X.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\uac00\uc785\ud558\uae30"}),Object(X.jsx)(te.a,{container:!0,justifyContent:"flex-end",children:Object(X.jsxs)(te.a,{item:!0,children:["\uc774\ubbf8 \ud68c\uc6d0\uc774\uc2e0\uac00?"," ",Object(X.jsx)($.a,{component:u.b,to:"/login",children:"\ub85c\uadf8\uc778"})]})})]})]}),Object(X.jsx)(ae.a,{mt:5,children:Object(X.jsx)(re,{})})]})};function le(){return Object(X.jsxs)(K.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(X.jsx)($.a,{component:u.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var ue=Object(H.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var de=function(){var e=ue(),t=Object(a.useState)({email:"",password:""}),n=Object(V.a)(t,2),o=n[0],c=n[1],r=function(e){var t=e.target,n=t.name,a=t.value;c(Object(m.a)(Object(m.a)({},o),{},Object(J.a)({},n,a)))},s=function(){var e=Object(z.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""!==o.email&&""!==o.password&&T(o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)(Q.a,{component:"main",maxWidth:"xs",children:[Object(X.jsx)(Z.a,{}),Object(X.jsxs)("div",{className:e.paper,children:[Object(X.jsx)(ee.a,{className:e.avatar,children:Object(X.jsx)(ce.a,{})}),Object(X.jsx)(K.a,{component:"h1",variant:"h5",children:"\ub85c\uadf8\uc778"}),Object(X.jsxs)("form",{className:e.form,onSubmit:s,noValidate:!0,children:[Object(X.jsx)(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",name:"email",autoComplete:"email",autoFocus:!0,value:o.email,onChange:r}),Object(X.jsx)(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:r}),Object(X.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(X.jsxs)(te.a,{container:!0,children:[Object(X.jsx)(te.a,{item:!0,xs:!0}),Object(X.jsx)(te.a,{item:!0,children:Object(X.jsx)($.a,{component:u.b,to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"})})]})]})]}),Object(X.jsx)(ae.a,{mt:8,children:Object(X.jsx)(le,{})})]})},me=n(171),je=n(180),be=n(177),fe=n(7),pe=n(173),he=n(174),ge=n(175),Oe=n(176),xe=Object(fe.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(pe.a),ve=Object(i.b)(null,(function(e){return{rx_focusroom:function(t){e(S(t))},rx_focusmsg:function(t){e(k(t))}}}))((function(e){var t=e.img,n=e.text,a=e.sub,o=e.uid,c=e.msg_key,r=e.me,s=e.invisible,i=e.event,l=e.rx_focusroom,u=e.rx_focusmsg;return Object(X.jsxs)("li",{style:{display:c?"flex":"block"},children:[Object(X.jsxs)(he.a,{button:!0,onClick:function(){return i(c||o)},children:[Object(X.jsx)(ge.a,{children:Object(X.jsx)(xe,{invisible:s,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(X.jsx)(ee.a,{alt:"Remy Sharp",src:t})})}),Object(X.jsx)(Oe.a,{primary:n,secondary:a})]}),c&&Object(X.jsx)($.a,{onClick:function(){return function(e,t,n,a){var o=prompt("\ubcf8\uc778\uc758 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694");t.password===o?(U.ref("room/".concat(e)).remove(),U.ref("msg/".concat(e)).remove(),n(""),a([]),alert("\uc0ad\uc81c\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub824\uc11c \uc0ad\uc81c \ubd88\uac00\ud569\ub2c8\ub2e4")}(c,r,l,u)},children:"\uc0ad\uc81c"})]})})),ye=n(172),_e=n(178),we=Object(H.a)((function(e){return{root:{},list:{height:"240px",overflowY:"scroll"},divider:{}}})),Ce=Object(i.b)((function(e){return{all_users:e.chats.all_users,all_connected:e.chats.all_connected,me:e.chats.me[0]}}),null)((function(e){var t=e.title,n=e.data,o=e.event,c=e.all_users,r=e.all_connected,s=e.me,i=e.loading,l=we();function u(e){return void 0!==e&&c.length>0&&c.filter((function(t){return t.uid===e}))[0].name}return Object(a.useEffect)((function(){console.log("[\ud45c\uc2dc]FriendList.js")}),[]),Object(X.jsxs)(ae.a,{className:l.root,children:[Object(X.jsx)(be.a,{children:t}),Object(X.jsxs)(ye.a,{className:l.list,children:[i&&Object(X.jsx)(ae.a,{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(X.jsx)(_e.a,{color:"secondary"})}),n.length>0?n.map((function(e,t){return Object(X.jsx)(ve,{invisible:!W(r,e.uid),img:"https://material-ui.com/static/images/avatar/1.jpg",text:Array.isArray(e.uid)?e.uid.map((function(e,t){return t>0?"/".concat(u(e)):u(e)})):u(e.uid),sub:void 0===e.email?"1:1 \ub300\ud654\ubc29":e.email,uid:e.uid,msg_key:e.msg_key,me:s,event:o},t)})):Object(X.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})]})]})})),ke=n(181),Se=n(179),Ne=n(185),Ie=n(92),Ae=n.n(Ie),Re=n(73),De=["username@gmail.com","user02@gmail.com"],Ue=Object(H.a)({avatar:{backgroundColor:Re.a[100],color:Re.a[600]}});function Ee(e){var t=Ue(),n=e.onClose,a=e.selectedValue,o=e.open,c=e.data,r=e.focusroom;return console.log("\uae4c\ub974\ub974\ub974\uad81",c),Object(X.jsxs)(Ne.a,{onClose:function(){n(a),console.log("\uae4c\ub974\ub974\ub974\uad81",c)},"aria-labelledby":"simple-dialog-title",open:o,children:[Object(X.jsx)(Se.a,{id:"simple-dialog-title",children:"Set backup account"}),Object(X.jsx)(ye.a,{children:c.length>0?c.map((function(e,a){return Object(X.jsxs)(he.a,{button:!0,onClick:function(){return t=e.uid,U.ref("room/".concat(r,"/uid")).once("value").then((function(e){var n=e.val();n.includes(t)?alert("\uc774\ubbf8 \ucd94\uac00\ub41c \uce5c\uad6c\uc785\ub2c8\ub2e4."):(n.push(t),U.ref("room/".concat(r)).update({uid:n}).then((function(){console.log("\uce5c\ucd94 \uc644\ub8cc",n)})).catch((function(e){console.log("\uce5c\ucd94 \uc2e4\ud328")})))})),void n(!1);var t},children:[Object(X.jsx)(ge.a,{children:Object(X.jsx)(ee.a,{className:t.avatar,children:Object(X.jsx)(Ae.a,{})})}),Object(X.jsx)(Oe.a,{primary:e.email})]},a)})):Object(X.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})})]})}var Be=Object(i.b)((function(e){return{all_users:e.chats.all_users,focusroom:e.chats.focusroom}}),null)((function(e){var t=e.all_users,n=e.focusroom,a=o.a.useState(!1),c=Object(V.a)(a,2),r=c[0],s=c[1],i=o.a.useState(De[1]),l=Object(V.a)(i,2),u=l[0],d=l[1];return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)($.a,{variant:"outlined",color:"primary",onClick:function(){s(!0)},children:"\uce5c\uad6c\ucd94\uac00"}),Object(X.jsx)(Ee,{data:t,focusroom:n,selectedValue:u,open:r,onClose:function(e){s(!1),d(e)}})]})})),Le=Object(H.a)((function(e){return{lBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},rBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},appBar:{top:"auto",bottom:0,left:0,width:"100%","& input,& button":{width:"100%",height:"50px"}},listBox:{display:"flex",flexDirection:"column"},listBoxItem:{},listBoxItemavatar:{display:"flex"}}})),Te=Object(i.b)((function(e){return{focusroom:e.chats.focusroom}}),(function(e){return{rx_remove:function(t){e({type:v,key:t})}}}))((function(e){var t=e.focusmsg,n=e.focusroom,c=e.rx_remove,r=e.loading,s=Le();console.log("Message-focusroom",n);var i=Object(a.useRef)(null);return Object(a.useEffect)((function(){console.log("[\ud45c\uc2dc]Message.js"),function(){var e=i.current.scrollHeight-i.current.clientHeight;i.current.scrollTo(0,e)}()}),[t,n]),Object(X.jsxs)(ae.a,{style:{height:"577px",overflowY:"scroll",paddingBottom:"15%"},ref:i,children:[r&&Object(X.jsx)(ae.a,{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(X.jsx)(_e.a,{color:"secondary"})}),Object(X.jsxs)(be.a,{style:{display:"flex",justifyContent:"space-between",backgroundColor:"#fff"},children:["\ucc44\ud305\ubc29",""!==n&&Object(X.jsx)(Be,{})]}),Object(X.jsx)(ye.a,{className:s.listBox,children:t.length>0?t.map((function(e,t){return Object(X.jsxs)(he.a,{className:s.listBoxItem,children:[Object(X.jsx)(ge.a,{className:s.listBoxItemavatar,style:{justifyContent:"flex-start"},children:Object(X.jsx)(ee.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})}),Object(X.jsx)(Oe.a,{primary:e.name,secondary:Object(X.jsxs)(o.a.Fragment,{children:[Object(X.jsx)(K.a,{component:"span",variant:"body2",color:"textPrimary",style:{wordBreak:"break-all"},children:e.message}),Object(X.jsx)("br",{}),ke.a(e.timestamp,"yyyy-MM-dd-HH-mm-ss")]})}),Object(X.jsx)($.a,{style:{display:D.currentUser.uid!==e.uid?"none":"inline-flex"},onClick:function(){return function(e,t,n){U.ref("msg/".concat(e,"/").concat(t)).remove(),n(t),console.log("[\uba54\uc2dc\uc9c0 \uc0ad\uc81c]removeChats",e,t)}(n,e.key,c)},children:"\uc0ad\uc81c"})]},t)})):Object(X.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})})]})})),Me=n(93),We=n.n(Me),Fe=Object(H.a)((function(e){return{InputBox:{display:"flex",backgroundColor:"#fff",position:"absolute",bottom:"0",width:"93%",margin:"2%",padding:"2%",boxShadow:"1px 1px 5px #a0a0a0",borderRadius:"5px",justifyContent:"space-between"},button:{margin:e.spacing(1)}}})),Xe=Object(i.b)((function(e){return{focusroom:e.chats.focusroom,me:e.chats.me[0]}}),null)((function(e){var t=e.focusroom,n=e.me,o=Fe(),c=Object(a.useState)(""),r=Object(V.a)(c,2),s=r[0],i=r[1],l=function(){var e=Object(z.a)(q.a.mark((function e(a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),i(""),L({message:s,timestamp:Date.now(),uid:D.currentUser.uid,name:null===D.currentUser.displayName?n.name:D.currentUser.displayName},t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)("form",{onSubmit:l,children:Object(X.jsxs)(ae.a,{className:o.InputBox,children:[Object(X.jsx)(ne.a,{id:"outlined-basic",label:"\uba54\uc2dc\uc9c0",value:s,onChange:function(e){i(e.target.value)},style:{width:"100%"}}),Object(X.jsx)($.a,{variant:"contained",color:"primary",type:"submit",className:o.button,endIcon:Object(X.jsx)(We.a,{}),children:"Send"})]})})})),Pe=Object(H.a)((function(e){return{root:{},chat_wrap:{width:"100%",backgroundColor:e.palette.background.paper,height:"577px"}}})),Ye=Object(i.b)((function(e){return{all_users:e.chats.all_users,myroomlist:e.chats.myroomlist,allroomlist:e.chats.allroomlist,me:e.chats.me[0],focusroom:e.chats.focusroom,allmsglist:e.chats.allmsglist,focusmsg:e.chats.focusmsg,loading1:e.chats.loading1,loading2:e.chats.loading2,loading3:e.chats.loading3}}),(function(e){return{rx_all_users:function(t){e({type:b,result:t})},rx_me:function(t){e({type:f,result:t})},rx_myroomlist:function(t){e({type:h,result:t})},rx_allroomlist:function(t){e({type:g,result:t})},rx_focusroom:function(t){e(S(t))},rx_allmsglist:function(t){e({type:O,result:t})},rx_connected:function(t){e({type:p,result:t})},login_maintain:function(t){e(B(t))},rx_focusmsg:function(t){e(k(t))},rx_loading1:function(t){e({type:_,result:t})},rx_loading2:function(t){e({type:w,result:t})},rx_loading3:function(t){e({type:C,result:t})}}}))((function(e){var t=e.rx_all_users,n=e.all_users,c=e.rx_me,r=e.me,s=e.rx_myroomlist,i=e.myroomlist,l=e.rx_allroomlist,u=e.allroomlist,d=e.rx_focusroom,m=e.focusroom,j=e.rx_allmsglist,b=e.rx_connected,f=e.allmsglist,p=e.rx_focusmsg,h=e.focusmsg,g=e.rx_loading1,O=e.rx_loading2,x=e.rx_loading3,v=e.loading1,y=e.loading2,_=e.loading3,w=Pe();return Object(a.useEffect)((function(){console.log("[\ud45c\uc2dc]Chat.js"),function(e){U.ref("UsersConnection").on("value",(function(t){console.log("sfajklas",Object.values(t.val())),e(Object.values(t.val()))}))}(b),g(!0),O(!0),x(!0),function(e,t,n,a){U.ref("all_users").on("value",(function(n){var o=Object.values(n.val());e(o),console.log("response",o);var c=o.filter((function(e){return e.uid.includes(D.currentUser.uid)}));t(c),B(c[0]),console.log("me",c),a(!1)}))}(t,c,0,g),function(e,t,n){U.ref("room").on("value",(function(a){if(null!==a.val()){var o=Object.values(a.val());console.log("roomListBox",o),e(o);var c=o.filter((function(e){return e.uid.some((function(e){return e===D.currentUser.uid}))}));t(c),console.log("found",c)}else console.log("else"),e([]),t([]);n(!1)}))}(l,s,O),function(e,t){U.ref("msg").on("value",(function(n){if(null!==n.val()){var a=n.val();e(a)}t(!1)}))}(j,x)}),[]),Object(a.useEffect)((function(){f[m]?p(Object.values(f[m])):p([])}),[f,m]),Object(X.jsxs)(o.a.Fragment,{children:[Object(X.jsx)(Z.a,{}),Object(X.jsx)(Q.a,{maxWidth:"md",className:w.root,children:Object(X.jsx)(me.a,{className:w.chat_wrap,elevation:1,children:Object(X.jsxs)(te.a,{container:!0,spacing:0,children:[Object(X.jsxs)(te.a,{item:!0,xs:12,sm:4,className:w.sectionDesktop,children:[Object(X.jsx)(Ce,{title:"\uc804\uccb4 \uce5c\uad6c \ub9ac\uc2a4\ud2b8",data:n,loading:v,event:function(e){!function(e,t,n){var a=[e.uid,t],o=[e.uid,t].sort();console.log("handleFriend",a[0],a[1]),console.log(n);var c=JSON.parse(JSON.stringify(n));if(!(c=c.some((function(e){return JSON.stringify(e.uid.sort())===JSON.stringify(o)})))){var r=U.ref("room").push().key,s={uid:[e.uid,t],name:[],msg_key:r},i={};return i["/room/"+r]=s,U.ref().update(i)}alert("\uc774\ubbf8 \ubc29\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.")}(r,e,u)}}),Object(X.jsx)(je.a,{}),Object(X.jsx)(Ce,{title:"\ub098\uc758 \ubc29 \ub9ac\uc2a4\ud2b8",data:i,loading:y,event:function(e){d(e)}})]}),Object(X.jsxs)(te.a,{item:!0,xs:12,sm:8,style:{position:"relative"},children:[Object(X.jsx)(Te,{focusmsg:h,loading:_}),Object(X.jsx)(Xe,{})]})]})})})]})}));var Ge=Object(i.b)((function(e){return{authenticated:e.chats.authenticated}}),(function(e){return{rx_authenticated:function(t){e({type:j,result:t})}}}))((function(e){var t=e.rx_authenticated,n=e.authenticated;return Object(a.useEffect)((function(){console.log("[\ud45c\uc2dc]App.js"),function(e){D.onAuthStateChanged((function(t){t?(console.log("App/\ub85c\uadf8\uc778",t),E(!0),e(!0)):(console.log("App/\ub85c\uadf8\uc544\uc6c3",t),E(!1),e(!1))}))}(t)}),[]),Object(X.jsxs)(u.a,{children:[Object(X.jsxs)(d.d,{children:[Object(X.jsx)(Y,{path:"/chat",authenticated:n,component:Ye}),Object(X.jsx)(P,{path:"/signup",authenticated:n,component:ie}),Object(X.jsx)(P,{path:["/","/login"],authenticated:n,component:de})]}),n&&Object(X.jsx)("button",{onClick:function(){U.ref("UsersConnection/".concat(D.currentUser.uid)).set({connection:!1,uid:D.currentUser.uid}),D.signOut().then((function(){console.log("\ub85c\uadf8\uc544\uc6c3 \uc131\uacf5")})).catch((function(e){console.log("\ub85c\uadf8\uc544\uc6c3 \uc2e4\ud328")}))},children:"\ub85c\uadf8\uc544\uc6c3"})]})})),qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))},ze=Object(s.combineReducers)({chats:I}),Je=n(94),Ve=Object(Je.createLogger)(),He=Object(s.createStore)(ze,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(Ve)));r.a.render(Object(X.jsx)(i.a,{store:He,children:Object(X.jsx)(Ge,{})}),document.getElementById("root")),qe()}},[[128,1,2]]]);
//# sourceMappingURL=main.ba5f45d4.chunk.js.map